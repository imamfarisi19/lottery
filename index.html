<!DOCTYPE html>
<html>

<head>
    <title>Lottery Farisi</title>
</head>

<body>
    <h1> Aplikasi undian - Farisi </h1>
    <h2>File upload</h2>
    <label for="myfile">Select a file:</label><br/>
    <input type="file" id="fileUpload" name="fileUpload" required/><br/>
    <input type=" text " id="jumlahpemenang" name="jumlahpemenang" required/><br/>
    <input type="submit" value="Submit" onclick="upload()">
    <hr/>
    <ol id="result"></ol>
    <table id="tableData" style="width: 100%">
        <tr>
            <th>TimeStamp</th>
            <th>Email</th>
            <th>Nama</th>
            <th>Asal Instansi</th>
            <th>Pekerjaan</th>
            <th>Nomor WhatsApp</th>
        </tr>
    </table>

    <h3 id="hasil1"></h3>
    <script>
        function upload(event) {
            var file = document.getElementById("fileUpload").files[0];
            var reader = new FileReader();
            const limit = document.getElementById("jumlahpemenang").value;

            reader.onload = function(e) {
                console.log(e)
                var ar = e.target.result.split("\n");
                ar.shift();
                let shuffleData = acak(ar);
                let rowData = shuffleData.splice(0, limit);

                rowData.map(row => {
                    const name = row.split(",")[2].split('"')[1];
                    // Create list element
                    let listData = document.createElement("li");
                    let valueData = document.createTextNode(name);
                    listData.appendChild(valueData);

                    document.getElementById("result").appendChild(listData);
                })
            };
            reader.readAsText(file);
        }



        function acak(ar) {

            var ctr = ar.length,
                temp, index;

            // while there are elements in the array
            while (ctr > 0) {
                // pick a random index
                index = Math.floor(Math.random() * ctr);
                // Decrease ctr by 1
                ctr--;
                // and swap the last element with it
                temp = ar[ctr];
                ar[ctr] = ar[index];
                ar[index] = temp;
            }
            return ar;
        }
    </script>
    <script>
        //Concept and definition

        //Objects are programming entities that have certain basic characteristics:
        /* 
        Identity: 
        Every object in an object-oriented program has an identity. In other words, 
        every occurrence of a particular type of object —an instance — can be distinguished from
        every other occurrence of the same type of object as well as from objects of other types. 
        */
        /*
        Type: 
        Object-oriented programming lets you assign names to the different kind of objects in a program.
        In Java, classes define types. Therefore, when you create an object from a type, you’re saying 
        that the object is of the type specified by the class. 
        */
        /*
        State: 
        Although each instance of a given object type has the same attributes, each instance has a different
        state: that is, a different combination of values for each of its attributes. 
        */
        /*
        Behavior: 
        Another characteristic of objects is that they have behavior, which means that they can do things. 
        Like state, the specific behavior of an object depends on its type. Unlike state, though, behavior isn’t different 
        foreach instance of a type. 
        */
    </script>
</body>

</html>